import{$ as ke,A as I,Aa as Be,B as j,C as T,Ca as We,D as u,Da as q,E as n,F as a,G as f,Ga as $e,Ha as Ge,Ia as Je,Ja as Ke,K as xe,Ka as ze,L as $,M as x,Ma as qe,Na as Ze,O as y,Oa as Qe,P as se,Pa as Xe,Q as w,Qa as Ye,R as c,Ra as et,S as E,Sa as k,T as _,Ta as Z,U as N,Ua as tt,V as P,Va as de,W as H,Wa as it,Xa as Q,Y as A,Z as le,_ as Me,aa as we,ba as ce,c as fe,ca as Ee,d as oe,da as Ie,e as he,ea as je,f as ge,fa as Te,g as ve,h as Ce,i as Se,ia as De,j as ye,ja as Ae,k as m,ka as Oe,l as F,la as Fe,m as ne,ma as Ue,n as d,na as Re,o as V,oa as Le,p as B,pa as Ne,q as _e,qa as G,r as W,ra as Pe,s as be,sa as He,t as l,ta as Ve,u as g,ua as J,v,va as pe,w as U,wa as K,x as ae,xa as z,y as C,z as S}from"./chunk-ITDKNDED.js";var M=class{};var ot=new ne("COOKIE_OPTIONS"),me=new ne("COOKIE_WRITER");function X(e){return e==null}function D(e){return!X(e)}function _t(e){return typeof e=="string"}function nt(e,o){return o?{path:D(o.path)?o.path:e.path,domain:D(o.domain)?o.domain:e.domain,expires:D(o.expires)?o.expires:e.expires,secure:D(o.secure)?o.secure:e.secure,sameSite:D(o.sameSite)?o.sameSite:e.sameSite,httpOnly:D(o.httpOnly)?o.httpOnly:e.httpOnly,storeUnencoded:D(o.storeUnencoded)?o.storeUnencoded:e.storeUnencoded}:e}function bt(e){let o={},t="",i,r,p,s,O;if(e!==t)for(t=e,i=t.split(";"),o={},p=0;p<i.length;p++)r=i[p],s=r.indexOf("="),s>0&&(O=rt(r.substring(0,s).trim()),X(o[O])&&(o[O]=rt(r.substring(s+1).trim())));return o}function xt(e,o,t){let i=t?.expires,r;X(o)?(i="Thu, 01 Jan 1970 00:00:00 GMT",r=""):r=o,_t(i)&&(i=new Date(i));let p=t?.storeUnencoded?o:encodeURIComponent(r),s=encodeURIComponent(e)+"="+p;s+=t?.path?";path="+t.path:"",s+=t?.domain?";domain="+t.domain:"",s+=i?";expires="+i.toUTCString():"",s+=t?.sameSite?"; SameSite="+t.sameSite:"",s+=t?.secure?";secure":"",s+=t?.httpOnly?"; HttpOnly":"";let O=s.length+1;return O>4096&&console.log("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+O+" > 4096 bytes)!"),s}function rt(e){try{return decodeURIComponent(e)}catch{return e}}var ue=(()=>{class e{constructor(t={},i){this.injector=i,this.defaultOptions={path:this.injector.get(Te,"/"),domain:void 0,expires:void 0,secure:!1,httpOnly:!1},this.options=nt(this.defaultOptions,t)}}return e.\u0275fac=function(t){return new(t||e)(d(ot),d(_e))},e.\u0275prov=m({token:e,factory:e.\u0275fac}),e})(),Y=(()=>{class e{constructor(t,i,r){this.document=t,this.optionsProvider=i,this.cookieWriterService=r,this.options=this.optionsProvider.options}hasKey(t){let i=this.get(t);return D(i)}get(t){return this.getAll()?.[t]}getObject(t){let i=this.get(t);if(!X(i))return i===""?{}:JSON.parse(i)}getAll(){let t=this.cookieWriterService.readAllAsString();return bt(t)}put(t,i,r){let p=nt(this.options,r);this.cookieWriterService.write(t,i,p)}putObject(t,i,r){this.put(t,JSON.stringify(i),r)}remove(t,i){this.put(t,void 0,i)}removeAll(t){let i=this.getAll();Object.keys(i).forEach(r=>this.remove(r,t))}}return e.\u0275fac=function(t){return new(t||e)(d(W),d(ue),d(me))},e.\u0275prov=m({token:e,factory:e.\u0275fac}),e})(),Mt=(()=>{class e{constructor(t){this.document=t}readAllAsString(){return this.document.cookie||""}write(t,i,r){this.document.cookie=xt(t,i,r)}}return e.\u0275fac=function(t){return new(t||e)(d(W))},e.\u0275prov=m({token:e,factory:e.\u0275fac}),e})();function kt(e,o,t){return new Y(e,o,t)}var at=(()=>{class e{static withOptions(t={}){return{ngModule:e,providers:[{provide:ot,useValue:t},{provide:me,useClass:Mt},{provide:Y,useFactory:kt,deps:[W,ue,me]}]}}static forRoot(t={}){return this.withOptions(t)}static forChild(t={}){return this.withOptions(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=U({type:e}),e.\u0275inj=F({providers:[ue]}),e})();var b=(()=>{class e extends Q{constructor(t,i,r){super(t),this.cookieService=i,this.route=r,this.currentUserSubject=new oe(new M);let p=i.get("currentUser");p&&(this.currentUserSubject=new oe(JSON.parse(p)),this.currentUser=this.currentUserSubject.asObservable())}get currentUserValue(){return this.currentUserSubject?.value}login(t){return this.post("/auth/login",t).pipe(ge(i=>{if(i.token){let r=new Date;r.setDate(r.getDate()+1),this.cookieService.put("currentUser",JSON.stringify(i),{expires:r,path:"/"}),this.currentUserSubject.next(i)}return i}))}logout(){this.cookieService.remove("currentUser"),this.currentUserSubject.next(new M),this.route.navigateByUrl("/user/login")}getUserData(){return this.get("/profile")}static{this.\u0275fac=function(i){return new(i||e)(d(G),d(Y),d(k))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ee=(()=>{class e{constructor(t,i){this.router=t,this.userService=i}canActivate(t,i){return this.userService.currentUserValue.token?!0:(this.router.navigate(["user/login"],{queryParams:{returnUrl:i.url}}),!1)}static{this.\u0275fac=function(i){return new(i||e)(d(k),d(b))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var st=e=>({"is-invalid":e});function jt(e,o){e&1&&(n(0,"div"),c(1,"Username is required"),a())}function Tt(e,o){if(e&1&&(n(0,"div",10),C(1,jt,2,0,"div"),a()),e&2){let t=y();l(),S(t.form.email.errors!=null&&t.form.email.errors.required?1:-1)}}function Dt(e,o){e&1&&(n(0,"div"),c(1," Password is required "),a())}function At(e,o){if(e&1&&(n(0,"div",10),C(1,Dt,2,0,"div"),a()),e&2){let t=y();l(),S(t.form.password.errors!=null&&t.form.password.errors.required?1:-1)}}function Ot(e,o){e&1&&f(0,"span",15)}function Ft(e,o){if(e&1&&(n(0,"div",16),c(1),a()),e&2){let t=y();l(),_(" ",t.error," ")}}var lt=(()=>{class e{constructor(t,i,r,p){this.formBuilder=t,this.route=i,this.router=r,this.userService=p,this.loading=!1,this.submitted=!1,this.error="",this.userService.currentUserValue.token&&this.router.navigate(["/user/profile"])}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",pe.required],password:["",pe.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/user/profile"}get form(){return this.loginForm.controls}onSubmit(){if(this.submitted=!0,this.loginForm.invalid)return;this.loading=!0;let t={username:this.form.email.value,password:this.form.password.value};this.userService.login(t).pipe(Se()).subscribe({next:()=>this.router.navigate([this.returnUrl]),error:()=>this.loading=!1})}static{this.\u0275fac=function(i){return new(i||e)(g(qe),g(Ye),g(k),g(b))}}static{this.\u0275cmp=v({type:e,selectors:[["app-login"]],standalone:!1,decls:23,vars:14,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"login-wrap","position-relative","bg-white","rounded","shadow-sm","p-4","p-md-5"],[1,"icon","d-flex","align-items-center","justify-content-center","bg-light","rounded-circle"],[1,"fa-regular","fa-user","text-primary"],[1,"text-center","mb-4"],["action","#",1,"login-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["type","text","id","email","placeholder","Username","formControlName","email","autofocus","",1,"form-control","rounded-left"],[1,"invalid-feedback"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control","rounded-left"],[1,"text-center","small"],["href","javascript:void(0)"],["type","submit",1,"btn","btn-primary","rounded","submit","py-3","px-5","position-absolute","top-100","start-50","translate-middle",3,"disabled"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"alert","alert-danger","mt-3","mb-0"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),f(5,"span",5),a(),n(6,"h3",6),c(7,"Log in"),a(),n(8,"form",7),x("ngSubmit",function(){return r.onSubmit()}),n(9,"div",8),f(10,"input",9),C(11,Tt,2,1,"div",10),a(),n(12,"div",8),f(13,"input",11),C(14,At,2,1,"div",10),a(),n(15,"div",12)(16,"a",13),c(17,"Forgot Password"),a()(),n(18,"div",8)(19,"button",14),C(20,Ot,1,0,"span",15),c(21," Login "),a(),C(22,Ft,2,1,"div",16),a()()()()()()),i&2&&(l(8),u("formGroup",r.loginForm),l(2),w(le(10,st,r.submitted&&r.form.email.errors)),l(),S(r.submitted&&r.form.email.errors?11:-1),l(2),w(le(12,st,r.submitted&&r.form.password.errors)),l(),S(r.submitted&&r.form.password.errors?14:-1),l(5),u("disabled",r.loading),l(),S(r.loading?20:-1),l(2),S(r.error?22:-1))},dependencies:[q,J,K,z,Ge,$e],encapsulation:2})}}return e})();function Ut(e,o){if(e&1&&(n(0,"div",3)(1,"div",4),c(2,"user"),a(),n(3,"div",5)(4,"h5",6),c(5),a()()()),e&2){let t=y();l(5),E(t.user.username)}}var ct=(()=>{class e{constructor(t){this.userService=t,this.user=new M}ngOnInit(){this.userService.getUserData().subscribe(t=>this.user=t)}static{this.\u0275fac=function(i){return new(i||e)(g(b))}}static{this.\u0275cmp=v({type:e,selectors:[["app-profile"]],standalone:!1,decls:4,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],[1,"card","border-0","shadow-sm"],[1,"card-header"],[1,"card-body"],[1,"card-title"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),C(3,Ut,6,1,"div",3),a()()()),i&2&&(l(3),S(r.user?3:-1))},encapsulation:2})}}return e})();var pt=(()=>{class e{constructor(t,i){this.userService=t,this.router=i}canActivate(t){let i=t.data.expectedGroup;return!this.userService.currentUserValue.token||this.userService.currentUserValue.group!==i?(this.router.navigate(["user/login"]),!1):!0}static{this.\u0275fac=function(i){return new(i||e)(d(b),d(k))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var dt=(()=>{class e{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-not-found"]],standalone:!1,decls:9,vars:0,consts:[[1,"container"],[1,"p-5","rounded","mt-3","text-center"],[1,"lead"],["routerLink","/","role","button",1,"btn","btn-lg","btn-primary"],[1,"fa","fa-home"]],template:function(i,r){i&1&&(n(0,"main",0)(1,"div",1)(2,"h1"),c(3,"Page not found!"),a(),n(4,"p",2),c(5," Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora molestias nemo iste. "),a(),n(6,"a",3),f(7,"i",4),c(8," Home"),a()()())},dependencies:[Z],encapsulation:2})}}return e})();var te=class{constructor(o,t,i,r){this.completed=o,this.startDate=t,this.endDate=i,this.userId=r}};var mt=(()=>{class e extends Q{constructor(t){super(t)}getTechnicians(){return this.get("/users/group/1")}getReports(t,i,r,p){let s=new te(t,i,r,p);return this.post("/reports",s)}static{this.\u0275fac=function(i){return new(i||e)(d(G))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ie=()=>({standalone:!0});function Nt(e,o){if(e&1&&(n(0,"option",13),c(1),a()),e&2){let t=o.$implicit;u("value",t.id),l(),_(" ",t.firstName+" "+t.lastName," ")}}function Pt(e,o){if(e&1&&(n(0,"tr")(1,"td",25),c(2),ke(3,"date"),a(),n(4,"td"),c(5),a(),n(6,"td"),c(7),a(),n(8,"td")(9,"span"),c(10),a()(),n(11,"td"),c(12),a()()),e&2){let t=o.$implicit;l(2),E(we(3,7,t.date)),l(3),E(t.orderID),l(2),E(t.brand),l(2),w(t.repairStatus?"text-success":"text-danger"),l(),_(" $",t.price," "),l(2),E(t.username)}}var ut=(()=>{class e{constructor(t){this.reportsService=t,this.technicians$=new Array,this.userId=0,this.totalAmount=0}ngOnInit(){this.reports(),this.technicians()}reports(){this.reportsService.getReports(this.completed,this.startDate,this.endDate,+this.userId).subscribe(t=>{this.reportData$=t.data,this.totalAmount=t.totalAmount})}technicians(){this.reportsService.getTechnicians().subscribe(t=>this.technicians$=t.data)}static{this.\u0275fac=function(i){return new(i||e)(g(mt))}}static{this.\u0275cmp=v({type:e,selectors:[["app-reports"]],standalone:!1,decls:53,vars:13,consts:[[1,"container"],[1,"row"],[1,"col-md-12","mb-4"],[1,"row","gx-3","gy-2","align-items-center"],[1,"col-sm-3"],["for","startDate",1,"visually-hidden"],["type","date","id","startDate","placeholder","Start Date",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["for","endDate",1,"visually-hidden"],[1,"input-group"],["type","date","id","endDate","placeholder","End Date",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["for","technician",1,"visually-hidden"],["id","technician",1,"form-select",3,"ngModelChange","ngModel","ngModelOptions"],["value","0"],[3,"value"],[1,"col-auto"],[1,"form-check","d-flex","align-items-center"],["type","checkbox","id","autoSizingCheck2",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","autoSizingCheck2",1,"form-check-label","ms-2"],[1,"col-md-12"],[1,"table-responsive","bg-white","shadow-sm","mb-4"],[1,"table","table-hover","border-0-last-tr"],[1,"text-uppercase","small"],["scope","col",1,"text-secondary","text-opacity-50","border-0"],[1,"badge","bg-secondary"],[1,"border-0"],[1,"text-secondary"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4)(5,"label",5),c(6,"Start Date"),a(),n(7,"input",6),H("ngModelChange",function(s){return P(r.startDate,s)||(r.startDate=s),s}),x("ngModelChange",function(){return r.reports()}),a()(),n(8,"div",4)(9,"label",7),c(10,"End Date"),a(),n(11,"div",8)(12,"input",9),H("ngModelChange",function(s){return P(r.endDate,s)||(r.endDate=s),s}),x("ngModelChange",function(){return r.reports()}),a()()(),n(13,"div",4)(14,"label",10),c(15,"Select technician"),a(),n(16,"select",11),H("ngModelChange",function(s){return P(r.userId,s)||(r.userId=s),s}),x("ngModelChange",function(){return r.reports()}),n(17,"option",12),c(18,"All technicians..."),a(),j(19,Nt,2,2,"option",13,I),a()(),n(21,"div",14)(22,"div",15)(23,"input",16),H("ngModelChange",function(s){return P(r.completed,s)||(r.completed=s),s}),x("ngModelChange",function(){return r.reports()}),a(),n(24,"label",17),c(25," Completed "),a()()()()(),n(26,"div",18)(27,"div",19)(28,"table",20)(29,"thead",21)(30,"tr")(31,"th",22),c(32,"Date"),a(),n(33,"th",22),c(34,"Order ID"),a(),n(35,"th",22),c(36,"Product Name"),a(),n(37,"th",22),c(38,"Service Cost"),a(),n(39,"th",22),c(40,"Technic"),a()()(),n(41,"tbody"),j(42,Pt,13,9,"tr",null,I),n(44,"tr"),f(45,"td")(46,"td")(47,"td"),n(48,"td")(49,"h6")(50,"span",23),c(51),a()()(),f(52,"td",24),a()()()()()()()),i&2&&(l(7),N("ngModel",r.startDate),u("ngModelOptions",A(9,ie)),l(5),N("ngModel",r.endDate),u("ngModelOptions",A(10,ie)),l(4),N("ngModel",r.userId),u("ngModelOptions",A(11,ie)),l(3),T(r.technicians$),l(4),N("ngModel",r.completed),u("ngModelOptions",A(12,ie)),l(19),T(r.reportData$),l(9),_("TOTAL: $",r.totalAmount))},dependencies:[q,Ke,ze,J,Ve,Je,K,z,We,Be,Ae],encapsulation:2})}}return e})();var Ht=[{path:"",redirectTo:"user/login",pathMatch:"full"},{path:"user/login",component:lt},{path:"user/profile",component:ct,canActivate:[ee]},{path:"products",loadChildren:()=>import("./chunk-UQZ7WJO5.js").then(e=>e.ProductModule),canActivate:[ee]},{path:"services",loadChildren:()=>import("./chunk-ZZY3KHCV.js").then(e=>e.ProductServiceModule),canActivate:[ee]},{path:"reports",component:ut,canActivate:[pt],data:{expectedGroup:2}},{path:"error-404",component:dt},{path:"**",redirectTo:"error-404",pathMatch:"full"}],ft=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=U({type:e})}static{this.\u0275inj=F({imports:[de.forRoot(Ht),de]})}}return e})();var re=(()=>{class e{constructor(){this.messageSubject=new fe}addMessages(t){this.messageSubject.next(t)}getMessages(){return this.messageSubject.asObservable()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var gt=[{title:"Products",url:"/products",group:0,key:"products",icon:"",children:[{title:"Product List",url:"/products",group:0,key:"productList"},{title:"Add Product",url:"/products/add",group:2,key:"productAdd"}]},{title:"Services",url:"/services",group:0,key:"services",icon:"",children:[{title:"Service List",url:"/services",group:0,key:"serviceList"},{title:"Add Service",url:"/services/add",group:1,key:"serviceAdd"}]},{title:"Reports",url:"/reports",group:2,key:"reports",icon:""}];var Vt=()=>({exact:!0});function Bt(e,o){e&1&&xe(0)}function Wt(e,o){if(e&1&&(n(0,"li",8),ae(1,Bt,1,0,"ng-container",16),a()),e&2){let t=o.$implicit;y();let i=se(20),r=se(22);w(t.children?"dropdown":""),l(),u("ngTemplateOutlet",t.children?i:r)("ngTemplateOutletContext",t)}}function $t(e,o){if(e&1&&(n(0,"li")(1,"a",17),c(2),a()()),e&2){let t=o.$implicit;l(),u("routerLink",t.url)("routerLinkActive","text-primary"),l(),E(t.title)}}function Gt(e,o){if(e&1&&(n(0,"a",13),c(1),a(),n(2,"ul",14),j(3,$t,3,3,"li",null,I),a()),e&2){let t=o.children,i=o.title;l(),_(" ",i," "),l(2),T(t)}}function Jt(e,o){if(e&1&&(n(0,"a",18),c(1),a()),e&2){let t=o.title,i=o.url;u("routerLink",i)("routerLinkActive","text-primary"),l(),_(" ",t," ")}}var vt=(()=>{class e{constructor(){this.user=Ie(new M),this.logoutEvent=Ee()}ngOnChanges(){this.headerMenu=structuredClone(gt);let t=[];this.headerMenu.forEach((i,r)=>{(i.group===this.user().group||i.group===0)&&(t=[...t,i],i.children?.forEach((p,s)=>{p.group!==this.user().group&&p.group!==0&&t[r].children?.splice(s,1)}))}),this.headerMenu=t}logout(){this.logoutEvent.emit(()=>console.log("Logged out!"))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-header"]],inputs:{user:[1,"user"]},outputs:{logoutEvent:"logoutEvent"},standalone:!1,features:[be],decls:23,vars:4,consts:[["dropDownMenu",""],["productListOnly",""],[1,"navbar","navbar-expand-lg","fixed-top","navbar-light","bg-white","border-bottom"],[1,"container"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","text-uppercase"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link",3,"routerLinkActive","routerLinkActiveOptions"],[1,"nav-item",3,"class"],[1,"navbar-nav","text-capitalcase"],[1,"nav-item","dropdown"],["href","javascript:void(0)","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-end","border-0","shadow-sm"],["href","javascript:void(0)",1,"dropdown-item","text-primary",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-item","text-secondary",3,"routerLink","routerLinkActive"],[1,"nav-link",3,"routerLink","routerLinkActive"]],template:function(i,r){if(i&1){let p=$();n(0,"nav",2)(1,"div",3)(2,"button",4),f(3,"span",5),a(),n(4,"div",6)(5,"ul",7)(6,"li",8)(7,"a",9),c(8,"Home"),a()(),j(9,Wt,2,4,"li",10,I),a(),n(11,"ul",11)(12,"li",12)(13,"a",13),c(14),a(),n(15,"ul",14)(16,"li")(17,"a",15),x("click",function(){return V(p),B(r.logout())}),c(18,"Logout"),a()()()()()()()(),ae(19,Gt,5,1,"ng-template",null,0,ce)(21,Jt,2,3,"ng-template",null,1,ce)}i&2&&(l(7),u("routerLinkActive","text-primary")("routerLinkActiveOptions",A(3,Vt)),l(2),T(r.headerMenu),l(5),_(" ",r.user().username," "))},dependencies:[De,Z,tt],styles:[".dropdown-item[_ngcontent-%COMP%]:active{background:var(--bs-light)}"]})}}return e})();var zt=(e,o)=>({"alert-success":e,"alert-danger":o});function qt(e,o){if(e&1){let t=$();n(0,"app-header",3),x("logoutEvent",function(){V(t);let r=y();return B(r.logout())}),a()}if(e&2){let t=y();u("user",t.user)}}function Zt(e,o){if(e&1&&(n(0,"div",5),c(1),a()),e&2){let t=y().$implicit;w(Me(3,zt,t.type==="success",t.type==="error")),l(),_(" ",t.message," ")}}function Qt(e,o){if(e&1&&C(0,Zt,2,6,"div",4),e&2){let t=o.$implicit;S(t!=null&&t.type?0:-1)}}var Ct=(()=>{class e{constructor(t,i,r){this.userService=t,this.alertService=r,this.showHeader=!1,this.user=new M,this.alertObject=[],i.events.pipe(ve(p=>p instanceof Xe)).subscribe(p=>{t.currentUserValue.token?(this.showHeader=!0,this.user=t.currentUserValue):this.showHeader=!1})}ngOnInit(){this.alertService.getMessages().subscribe(t=>{this.alertObject.push(t),this.alertObject.forEach((i,r)=>{setTimeout(()=>{this.alertObject.splice(r,1)},4e3)})})}logout(){this.userService.logout()}static{this.\u0275fac=function(i){return new(i||e)(g(b),g(k),g(re))}}static{this.\u0275cmp=v({type:e,selectors:[["app-root"]],standalone:!1,decls:6,vars:1,consts:[[3,"user"],[1,"py-5"],[1,"position-absolute","alert-position"],[3,"logoutEvent","user"],["role","alert",1,"alert","py-2","mb-4","border-0","rounded-0","shadow-sm",3,"class"],["role","alert",1,"alert","py-2","mb-4","border-0","rounded-0","shadow-sm"]],template:function(i,r){i&1&&(C(0,qt,1,1,"app-header",0),f(1,"div",1),n(2,"div",2),j(3,Qt,1,1,null,null,I),a(),f(5,"router-outlet")),i&2&&(S(r.showHeader?0:-1),l(3),T(r.alertObject))},dependencies:[et,vt],encapsulation:2})}}return e})();var St=(()=>{class e{constructor(t,i){this.userService=t,this.alertService=i}handleError(t){let i;return t.error instanceof Error?i=`Error: ${t.error.message}`:i=`Backend error ${t.status}, ${t.error.message}`,console.error(i),this.alertService.addMessages({type:"error",message:i}),t.status===401&&this.userService.logout(),he(i)}intercept(t,i){let{origin:r}=new URL(t.url);if(r===it.NEST_URL){let p={};return this.userService.currentUserValue?(p.Authorization=`Bearer ${this.userService.currentUserValue.token}`,i.handle(t.clone({headers:new Re(p)})).pipe(ye(s=>{if(s instanceof Le&&((t.method==="DELETE"||t.method==="PATCH")&&this.alertService.addMessages({type:"success",message:`${t.method} ${s.statusText}`}),s.status===201)){if(s.url===`${r}/reports`)return;s.url===`${r}/auth/login`?this.alertService.addMessages({type:"success",message:"Successfully Logged In!"}):this.alertService.addMessages({type:"success",message:s.statusText})}}),Ce(s=>this.handleError(s)))):i.handle(t)}return i.handle(t)}static{this.\u0275fac=function(i){return new(i||e)(d(b),d(re))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac})}}return e})();var yt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=U({type:e,bootstrap:[Ct]})}static{this.\u0275inj=F({providers:[{provide:Ne,useClass:St,multi:!0},Pe(He())],imports:[at.withOptions(),Ue,ft,Oe,Ze,Qe]})}}return e})();Fe().bootstrapModule(yt,{applicationProviders:[je()]}).catch(e=>console.error(e));
