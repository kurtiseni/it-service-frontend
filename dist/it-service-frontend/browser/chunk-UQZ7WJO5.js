import{a as ae}from"./chunk-VIXTWGUZ.js";import{$ as O,A as B,B as V,C as $,D as y,Da as Z,E as o,F as n,G as u,Ga as K,Ha as ee,L as R,La as te,M as N,O as s,Oa as ie,Q as f,Qa as oe,R as c,S as h,Sa as ne,Ta as re,Va as F,X as G,Xa as de,Z as v,a as D,aa as H,b as T,ga as g,i as E,ja as W,k as I,ka as z,l as x,n as j,o as k,p as L,qa as J,t as r,u as _,ua as Q,v as S,va as p,w as P,wa as U,xa as X,y as a,ya as Y,z as l}from"./chunk-ITDKNDED.js";function M(e){return Object.keys(e.controls).reduce((d,t)=>{let m=e.controls[t];return m.dirty?m instanceof Y?T(D({},d),{[t]:M(m)}):T(D({},d),{[t]:m.value}):d},{})}var q=(()=>{class e extends de{constructor(t){super(t)}getProducts(){return this.get("/products")}getProduct(t){return this.get(`/products/${t}`)}addProduct(t){return this.post("/products",t)}updateProduct(t,m){return this.patch(`/products/${t}`,m)}deleteProduct(t){return this.delete(`/products/${t}`)}static{this.\u0275fac=function(m){return new(m||e)(j(J))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var C=e=>({"is-invalid":e});function se(e,d){e&1&&(o(0,"div"),c(1,"Customer Name is required"),n())}function pe(e,d){if(e&1&&(o(0,"div",4),a(1,se,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.customerName.errors!=null&&t.form.customerName.errors.required?1:-1)}}function fe(e,d){e&1&&(o(0,"div"),c(1,"Last Name is required"),n())}function ve(e,d){if(e&1&&(o(0,"div",4),a(1,fe,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.customerSurname.errors!=null&&t.form.customerSurname.errors.required?1:-1)}}function Ce(e,d){e&1&&(o(0,"div"),c(1,"Email is required"),n())}function _e(e,d){e&1&&(o(0,"div"),c(1,"Invalid Email address"),n())}function Ee(e,d){if(e&1&&(o(0,"div",4),a(1,Ce,2,0,"div"),a(2,_e,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.email.errors!=null&&t.form.email.errors.required?1:-1),r(),l(t.form.email.errors!=null&&t.form.email.errors.email?2:-1)}}function he(e,d){e&1&&(o(0,"div"),c(1,"Phone Number is required"),n())}function be(e,d){if(e&1&&(o(0,"div",4),a(1,he,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.phoneNumber.errors!=null&&t.form.phoneNumber.errors.required?1:-1)}}function xe(e,d){e&1&&(o(0,"div"),c(1,"Full Address is required"),n())}function Se(e,d){if(e&1&&(o(0,"div",4),a(1,xe,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.fullAddress.errors!=null&&t.form.fullAddress.errors.required?1:-1)}}function Pe(e,d){e&1&&(o(0,"div"),c(1,"Fiscal Code is required"),n())}function ye(e,d){if(e&1&&(o(0,"div",4),a(1,Pe,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.fiscalCode.errors!=null&&t.form.fiscalCode.errors.required?1:-1)}}function Ne(e,d){e&1&&(o(0,"div"),c(1,"Vat Number is required"),n())}function Ae(e,d){if(e&1&&(o(0,"div",4),a(1,Ne,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.vatNumber.errors!=null&&t.form.vatNumber.errors.required?1:-1)}}function qe(e,d){e&1&&(o(0,"div"),c(1,"pec is required"),n())}function De(e,d){if(e&1&&(o(0,"div",4),a(1,qe,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.pec.errors!=null&&t.form.pec.errors.required?1:-1)}}function Te(e,d){e&1&&(o(0,"div"),c(1,"SDI Code is required"),n())}function ge(e,d){if(e&1&&(o(0,"div",4),a(1,Te,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.sdiCode.errors!=null&&t.form.sdiCode.errors.required?1:-1)}}function Fe(e,d){e&1&&(o(0,"div"),c(1,"Phone Password/PIN is required"),n())}function Me(e,d){if(e&1&&(o(0,"div",4),a(1,Fe,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.password.errors!=null&&t.form.password.errors.required?1:-1)}}function we(e,d){e&1&&(o(0,"div"),c(1,"Serial Device is required"),n())}function Ie(e,d){if(e&1&&(o(0,"div",4),a(1,we,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.serialDevice.errors!=null&&t.form.serialDevice.errors.required?1:-1)}}function je(e,d){e&1&&(o(0,"div"),c(1,"Brand is required"),n())}function ke(e,d){if(e&1&&(o(0,"div",4),a(1,je,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.brand.errors!=null&&t.form.brand.errors.required?1:-1)}}function Le(e,d){e&1&&(o(0,"div"),c(1,"Template is required"),n())}function Be(e,d){if(e&1&&(o(0,"div",4),a(1,Le,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.template.errors!=null&&t.form.template.errors.required?1:-1)}}function Ve(e,d){e&1&&(o(0,"div"),c(1,"Additional Notes is required"),n())}function $e(e,d){if(e&1&&(o(0,"div",4),a(1,Ve,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.additionalNotes.errors!=null&&t.form.additionalNotes.errors.required?1:-1)}}function Re(e,d){e&1&&(o(0,"div"),c(1," is required"),n())}function Ge(e,d){if(e&1&&(o(0,"div",20),a(1,Re,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.purchaseDate.errors!=null&&t.form.purchaseDate.errors.required?1:-1)}}function Oe(e,d){e&1&&(o(0,"div"),c(1," is required"),n())}function He(e,d){if(e&1&&(o(0,"div",20),a(1,Oe,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.warrantyExpiryDate.errors!=null&&t.form.warrantyExpiryDate.errors.required?1:-1)}}function We(e,d){e&1&&(o(0,"div"),c(1,"Description is required"),n())}function ze(e,d){if(e&1&&(o(0,"div",4),a(1,We,2,0,"div"),n()),e&2){let t=s();r(),l(t.form.description.errors!=null&&t.form.description.errors.required?1:-1)}}function Je(e,d){e&1&&u(0,"span",27)}var w=(()=>{class e{constructor(t,m,i,b){this.formBuilder=t,this.productService=m,this.router=i,this.route=b,this.submitted=!1,this.loading=!1}ngOnInit(){this.productId=this.route.snapshot.paramMap.get("id"),this.productId&&this.fillProductForm(+this.productId),this.productForm=this.formBuilder.group({serialDevice:["",p.required],brand:["",p.required],template:["",p.required],description:["",p.required],purchaseDate:["",p.required],warrantyExpiryDate:["",p.required],additionalNotes:["",p.required],password:["",p.required],customerName:["",p.required],customerSurname:["",p.required],fullAddress:["",p.required],phoneNumber:["",p.required],email:["",[p.required,p.email]],fiscalCode:["",p.required],vatNumber:["",p.required],pec:["",p.required],sdiCode:["",p.required],userId:[4,p.required]})}get form(){return this.productForm.controls}onSubmit(){this.submitted=!0,!this.productForm.invalid&&(this.productId?this.updateProduct(+this.productId):this.addProduct())}addProduct(){this.loading=!0,this.productService.addProduct(this.productForm.value).pipe(E()).subscribe({next:()=>this.router.navigate(["../"],{relativeTo:this.route}),complete:()=>this.loading=!1})}updateProduct(t){let m=M(this.productForm);Object.keys(m).length&&(this.loading=!0,this.productService.updateProduct(t,m).subscribe({next:i=>console.log(i),complete:()=>this.loading=!1}))}fillProductForm(t){this.productService.getProduct(t).pipe(E()).subscribe(m=>{m.purchaseDate=g(m.purchaseDate,"yyyy-MM-dd","en"),m.warrantyExpiryDate=g(m.warrantyExpiryDate,"yyyy-MM-dd","en"),this.productForm.patchValue(m),this.productForm.markAsPristine()})}static{this.\u0275fac=function(m){return new(m||e)(_(te),_(q),_(ne),_(oe))}}static{this.\u0275cmp=S({type:e,selectors:[["app-add-edit-product"]],standalone:!1,decls:61,vars:87,consts:[[1,"container"],[1,"row","g-3","pb-4",3,"ngSubmit","formGroup"],[1,"col-md-6"],["type","text","formControlName","customerName","placeholder","First Name","autofocus","",1,"form-control"],[1,"invalid-feedback"],["type","text","formControlName","customerSurname","placeholder","Last Name",1,"form-control"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["type","tel","formControlName","phoneNumber","placeholder","Phone Number",1,"form-control"],["type","text","formControlName","fullAddress","placeholder","Full Address",1,"form-control"],["type","text","formControlName","fiscalCode","placeholder","Fiscal Code",1,"form-control"],["type","text","formControlName","vatNumber","placeholder","VAT Number",1,"form-control"],["type","text","formControlName","pec","placeholder","pec",1,"form-control"],["type","text","formControlName","sdiCode","placeholder","SDI Code",1,"form-control"],["type","text","formControlName","password","placeholder","Password",1,"form-control"],["type","text","formControlName","serialDevice","placeholder","Serial Device",1,"form-control"],["type","text","formControlName","brand","placeholder","Brand",1,"form-control"],["type","text","formControlName","template","placeholder","Template",1,"form-control"],["type","text","formControlName","additionalNotes","placeholder","Additional Notes",1,"form-control"],["type","date","id","purchaseDate","placeholder","Purchase Date","formControlName","purchaseDate",1,"form-control"],["for","purchaseDate",1,"form-label","small","text-secondary","fst-italic"],[1,"invalid-feedback","w-auto","float-end"],["type","date","id","warrantyExpiryDate","placeholder","Expiry Date","formControlName","warrantyExpiryDate",1,"form-control"],["for","warrantyExpiryDate",1,"form-label","small","text-secondary","fst-italic"],[1,"col-md-12"],["id","description","rows","4","placeholder","Description of the problem","name","description","formControlName","description",1,"form-control","h-auto"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-primary","text-uppercase"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(m,i){m&1&&(o(0,"div",0)(1,"form",1),N("ngSubmit",function(){return i.onSubmit()}),o(2,"div",2),u(3,"input",3),a(4,pe,2,1,"div",4),n(),o(5,"div",2),u(6,"input",5),a(7,ve,2,1,"div",4),n(),o(8,"div",2),u(9,"input",6),a(10,Ee,3,2,"div",4),n(),o(11,"div",2),u(12,"input",7),a(13,be,2,1,"div",4),n(),o(14,"div",2),u(15,"input",8),a(16,Se,2,1,"div",4),n(),o(17,"div",2),u(18,"input",9),a(19,ye,2,1,"div",4),n(),o(20,"div",2),u(21,"input",10),a(22,Ae,2,1,"div",4),n(),o(23,"div",2),u(24,"input",11),a(25,De,2,1,"div",4),n(),o(26,"div",2),u(27,"input",12),a(28,ge,2,1,"div",4),n(),o(29,"div",2),u(30,"input",13),a(31,Me,2,1,"div",4),n(),o(32,"div",2),u(33,"input",14),a(34,Ie,2,1,"div",4),n(),o(35,"div",2),u(36,"input",15),a(37,ke,2,1,"div",4),n(),o(38,"div",2),u(39,"input",16),a(40,Be,2,1,"div",4),n(),o(41,"div",2),u(42,"input",17),a(43,$e,2,1,"div",4),n(),o(44,"div",2),u(45,"input",18),o(46,"label",19),c(47,"Purchase Date"),n(),a(48,Ge,2,1,"div",20),n(),o(49,"div",2),u(50,"input",21),o(51,"label",22),c(52,"Warranty Expiry Date"),n(),a(53,He,2,1,"div",20),n(),o(54,"div",23),u(55,"textarea",24),a(56,ze,2,1,"div",4),n(),o(57,"div",25)(58,"button",26),a(59,Je,1,0,"span",27),c(60," Submit product "),n()()()()),m&2&&(r(),y("formGroup",i.productForm),r(2),f(v(53,C,i.submitted&&i.form.customerName.errors)),r(),l(i.submitted&&i.form.customerName.errors?4:-1),r(2),f(v(55,C,i.submitted&&i.form.customerSurname.errors)),r(),l(i.submitted&&i.form.customerSurname.errors?7:-1),r(2),f(v(57,C,i.submitted&&i.form.email.errors)),r(),l(i.submitted&&i.form.email.errors?10:-1),r(2),f(v(59,C,i.submitted&&i.form.phoneNumber.errors)),r(),l(i.submitted&&i.form.phoneNumber.errors?13:-1),r(2),f(v(61,C,i.submitted&&i.form.fullAddress.errors)),r(),l(i.submitted&&i.form.fullAddress.errors?16:-1),r(2),f(v(63,C,i.submitted&&i.form.fiscalCode.errors)),r(),l(i.submitted&&i.form.fiscalCode.errors?19:-1),r(2),f(v(65,C,i.submitted&&i.form.vatNumber.errors)),r(),l(i.submitted&&i.form.vatNumber.errors?22:-1),r(2),f(v(67,C,i.submitted&&i.form.pec.errors)),r(),l(i.submitted&&i.form.pec.errors?25:-1),r(2),f(v(69,C,i.submitted&&i.form.sdiCode.errors)),r(),l(i.submitted&&i.form.sdiCode.errors?28:-1),r(2),f(v(71,C,i.submitted&&i.form.password.errors)),r(),l(i.submitted&&i.form.password.errors?31:-1),r(2),f(v(73,C,i.submitted&&i.form.serialDevice.errors)),r(),l(i.submitted&&i.form.serialDevice.errors?34:-1),r(2),f(v(75,C,i.submitted&&i.form.brand.errors)),r(),l(i.submitted&&i.form.brand.errors?37:-1),r(2),f(v(77,C,i.submitted&&i.form.template.errors)),r(),l(i.submitted&&i.form.template.errors?40:-1),r(2),f(v(79,C,i.submitted&&i.form.additionalNotes.errors)),r(),l(i.submitted&&i.form.additionalNotes.errors?43:-1),r(2),f(v(81,C,i.submitted&&i.form.purchaseDate.errors)),r(3),l(i.submitted&&i.form.purchaseDate.errors?48:-1),r(2),f(v(83,C,i.submitted&&i.form.warrantyExpiryDate.errors)),r(3),l(i.submitted&&i.form.warrantyExpiryDate.errors?53:-1),r(2),f(v(85,C,i.submitted&&i.form.description.errors)),r(),l(i.submitted&&i.form.description.errors?56:-1),r(3),l(i.loading?59:-1))},dependencies:[Z,Q,U,X,ee,K],encapsulation:2})}}return e})();function Qe(e,d){if(e&1){let t=R();o(0,"tr")(1,"td",7),c(2),O(3,"date"),n(),o(4,"td"),c(5),n(),o(6,"td"),c(7),n(),o(8,"td"),c(9),n(),o(10,"td")(11,"div",8)(12,"a",9),u(13,"i",10),n(),o(14,"button",11),N("click",function(){let i=k(t).$implicit,b=s();return L(b.deleteProduct(i.id))}),u(15,"i",12),n()()()()}if(e&2){let t=d.$implicit;r(2),h(H(3,6,t.purchaseDate)),r(3),h(t.key),r(2),h(t.brand),r(2),h(t.serialDevice),r(3),y("routerLink",G("edit/",t.id))}}function Ue(e,d){e&1&&(o(0,"tr")(1,"td",13)(2,"div",14)(3,"div",15)(4,"span",16),c(5,"Loading..."),n()()()()())}var me=(()=>{class e{constructor(t){this.productService=t}ngOnInit(){this.productList()}productList(){this.productService.getProducts().subscribe(t=>this.productList$=t.data)}deleteProduct(t){this.productService.deleteProduct(t).pipe(E()).subscribe(()=>{this.productList()})}static{this.\u0275fac=function(m){return new(m||e)(_(q))}}static{this.\u0275cmp=S({type:e,selectors:[["app-product"]],standalone:!1,decls:21,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],[1,"table-responsive","bg-white","shadow-sm","mb-4"],[1,"table","table-hover","border-0-last-tr"],[1,"text-uppercase","small"],["scope","col",1,"text-secondary","text-opacity-50","border-0"],[1,"text-secondary"],[1,"d-flex"],[1,"btn","btn-sm","btn-light",3,"routerLink"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-sm","btn-light","ms-2",3,"click"],[1,"fa-regular","fa-trash-can"],["colspan","5"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(m,i){m&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"tr")(7,"th",6),c(8,"Purchase Date"),n(),o(9,"th",6),c(10,"Product Key"),n(),o(11,"th",6),c(12,"Brand"),n(),o(13,"th",6),c(14,"Serial Device"),n(),u(15,"th",6),n()(),o(16,"tbody"),V(17,Qe,16,8,"tr",null,B),a(19,Ue,6,0,"tr"),n()()()()()(),u(20,"app-add-button")),m&2&&(r(17),$(i.productList$),r(2),l(i.productList$?-1:19))},dependencies:[re,ae,W],encapsulation:2})}}return e})();var Xe=[{path:"",component:me},{path:"add",component:w},{path:"edit/:id",component:w}],ce=(()=>{class e{static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275mod=P({type:e})}static{this.\u0275inj=x({imports:[F.forChild(Xe),F]})}}return e})();var Nt=(()=>{class e{static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275mod=P({type:e})}static{this.\u0275inj=x({imports:[z,ce,ie]})}}return e})();export{Nt as ProductModule};
